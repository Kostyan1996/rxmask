!function(t){var s={};function o(e){if(s[e])return s[e].exports;var r=s[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=s,o.d=function(t,s,e){o.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:e})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,s){if(1&s&&(t=o(t)),8&s)return t;if(4&s&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(o.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&s&&"string"!=typeof t)for(var r in t)o.d(e,r,function(s){return t[s]}.bind(null,r));return e},o.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(s,"a",s),s},o.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},o.p="",o(o.s=0)}([function(t,s,o){"use strict";o.r(s),o.d(s,"default",(function(){return e}));class e{constructor(t={},s){this.options={mask:"",placeholderSymbol:"*",rxmask:[],value:"",cursorPos:0,allowedCharacters:".",maxMaskLength:0,trailing:!0},this.errors=[],this._output="",this._parsedValue="",this._prevValue="",this._isRemovingSymbols=!1,this._actualCursorPos=0,this._finalCursorPos=0,this.input=s,this.setOptions(t),this.input?this.onInput():this.parseMask()}get output(){return this._output}get parsedValue(){return this._parsedValue}get finalCursorPos(){return this._finalCursorPos}setOptions({mask:t="",placeholderSymbol:s="*",rxmask:o="",allowedCharacters:e=".",maxMaskLength:r="0",trailing:i="true",value:n="",cursorPos:a=-1}){this.options.mask=t,this.options.placeholderSymbol=s,this.options.rxmask=this.strToRxmask(o),this.options.allowedCharacters=e,this.options.maxMaskLength=Number(r),this.options.trailing="true"===i,this.options.value=n,this.options.cursorPos=a,0===this.options.rxmask.length&&(this.options.rxmask=this.options.mask.split("").map(t=>t===this.options.placeholderSymbol?"[^]":t))}parseOptionsFromInput(){if(this.input){const t=this.input.dataset;this.options.mask=t.mask||this.options.mask,this.options.placeholderSymbol=t.placeholdersymbol||this.options.placeholderSymbol,this.options.rxmask=t.rxmask?this.strToRxmask(t.rxmask):this.options.rxmask,this.options.allowedCharacters=t.allowedcharacters||this.options.allowedCharacters,this.options.maxMaskLength=void 0!==t.maxmasklength?Number(t.maxmasklength):this.options.maxMaskLength,this.options.trailing=void 0!==t.trailing?"true"===t.trailing:this.options.trailing,this.options.value=this.input.value,this.options.cursorPos=this.input.selectionStart||0,0===this.options.rxmask.length&&(this.options.rxmask=this.options.mask.split("").map(t=>t===this.options.placeholderSymbol?"[^]":t))}}onInput(){this.parseOptionsFromInput(),this.parseMask(),this.input&&(this.input.value=this.output,this.input.setSelectionRange(this.finalCursorPos,this.finalCursorPos))}parseMask(){this.errors=[];const t=this.parseOutMask(),s=this.parseRxmask(t);this._parsedValue=s,this._output=this.getOutput(s),this._prevValue=this._output}parseOutMask(){const{value:t,cursorPos:s,rxmask:o,placeholderSymbol:e,allowedCharacters:r}=this.options,i=t.length-this._prevValue.length;this._isRemovingSymbols=!(i>=0);let n=/./;try{n=new RegExp(r)}catch(t){console.error("Wrong regex for allowedCharacters!")}let a="";for(let r=s;r<t.length;r++)t[r]!==o[r-i]&&t[r]!==e&&t[r].match(n)&&(a+=t[r]);let l="";for(let r=0;r<s;r++)t[r]!==o[r]&&(t[r]!==e&&t[r].match(n)?l.length<o.filter(t=>t.match(/\[.*\]/)).length-a.length?l+=t[r]:this.errors.push({symbol:t[r],position:r,type:"length"}):t[r]===e||t[r].match(n)||this.errors.push({symbol:t[r],position:r,type:"allowedCharacters"}));return this._actualCursorPos=l.length,l+a}parseRxmask([...t]){const{rxmask:s}=this.options;let o="";const e=s.filter(t=>t.match(/\[.*\]/));let r=0;for(;t.length>0&&r<t.length;){let s=/./;try{s=new RegExp(e[r])}catch(t){console.error("Wrong regex for rxmask!")}t[r].match(s)?(o+=t[r],r++):(this.errors.push({symbol:t[r],position:r,type:"rxmask"}),t.shift(),this._actualCursorPos>r&&this._actualCursorPos--)}return o}getOutput([...t]){const{rxmask:s,maxMaskLength:o,placeholderSymbol:e,trailing:r}=this.options;this._finalCursorPos=0;let i="";const n=0===t.length,a=s.filter(t=>t.match(/\[.*\]/)).length===t.length;let l=!1;for(let h=0;h<s.length;h++)if(s[h].match(/\[.*\]/)){if(t.length>0)i+=t.shift();else{if(!(o>h))break;i+=e,l=!0}this._actualCursorPos>0&&this._finalCursorPos++,this._actualCursorPos--}else{if(!(o>h||t.length>0||(r||a)&&!l&&!this._isRemovingSymbols))break;i+=s[h],(!l&&n&&o>h||this._actualCursorPos>0||r&&0===this._actualCursorPos&&!this._isRemovingSymbols)&&this._finalCursorPos++}return i}strToRxmask(t){return(t||"").match(/(\[.*?\])|(.)/g)||[]}}!function(){const t=document.getElementsByClassName("rxmask");for(let s=0;s<t.length;s++){const o=t[s],r=new e({},o);o.oninput=()=>r.onInput()}}()}]);